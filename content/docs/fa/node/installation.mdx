---
title: نصب
description: نصب نود PasarGuard با روش‌های مختلف
icon: Download
---

## روش‌های نصب

نود PasarGuard رو می‌تونی با چند روش مختلف نصب کنی. اون روشی رو انتخاب کن که بیشتر برات راحته.

## نصب یک کلیکی (پیشنهادی)

ساده‌ترین راه برای نصب نود PasarGuard، استفاده از اسکریپت خودکار ماست:

```bash
sudo bash -c "$(curl -sL https://github.com/PasarGuard/scripts/raw/main/pg-node.sh)" @ install
```

این اسکریپت:
- همه وابستگی‌های لازم رو نصب می‌کنه
- نود PasarGuard رو راه‌اندازی می‌کنه
- تنظیمات پایه رو انجام می‌ده
- سرویس رو خودکار استارت می‌زنه

---

## نصب داکر

### پیش‌نیازها

داکر را روی دستگاه خود نصب کنید:

```bash
curl -fsSL https://get.docker.com | sh
```

### استفاده از Docker Compose

1. فایل docker-compose را دانلود کنید:

```bash
wget https://raw.githubusercontent.com/PasarGuard/node/refs/heads/main/docker-compose.yml
```

2. فایل `.env` خود را ایجاد و پیکربندی کنید (به [پیکربندی](/node/configuration) مراجعه کنید)

3. نود را شروع کنید:

```bash
docker compose up -d
```

### دستورات داکر

**مشاهده لاگ‌ها:**
```bash
docker compose logs -f
```

**توقف نود:**
```bash
docker compose down
```

**راه‌اندازی مجدد نود:**
```bash
docker compose restart
```

**به‌روزرسانی به آخرین نسخه:**
```bash
docker compose pull
docker compose up -d
```

---

## نصب دستی

<Callout type="warn">
  نصب دستی برای مبتدیان توصیه نمی‌شود. به جای آن از روش نصب یک کلیکی یا داکر استفاده کنید.
</Callout>

### پیش‌نیازها

1. **نصب Go** (نسخه 1.25 یا بالاتر)

   از [go.dev](https://go.dev/dl/) دانلود کن

2. **کلون کردن مخزن:**

```bash
git clone https://github.com/PasarGuard/node.git
cd node
```

### ساخت فایل باینری

1. نصب وابستگی‌ها:

```bash
make deps
```

2. ساخت فایل باینری:

```bash
make
```

این یک فایل باینری برای معماری سیستم شما تولید می‌کند.

### نصب هسته Xray

هسته Xray را نصب کنید:

```bash
make install_xray
```

### تولید گواهی SSL

بر اساس IP یا دامنه سرور خود گواهی تولید کنید:

```bash
# برای گواهی مبتنی بر دامنه
make generate_server_cert CN=example.com SAN="DNS:example.com"

# برای گواهی مبتنی بر IP
make generate_server_cert CN=example.com SAN="IP:YOUR_SERVER_IP"

# برای دامنه و IP
make generate_server_cert CN=example.com SAN="DNS:example.com,IP:YOUR_SERVER_IP"
```

### پیکربندی و اجرا

1. فایل `.env` خود را ایجاد و پیکربندی کنید (به [پیکربندی](/node/configuration) مراجعه کنید)

2. فایل باینری را اجرا کنید:

```bash
./pasarguard-node
```

---

## پس از نصب

### پیکربندی فایروال

مطمئن شوید که پورت‌های مورد نیاز را در فایروال خود باز کرده‌اید:

```bash
# برای Ubuntu/Debian
sudo ufw allow YOUR_PORT/tcp

# برای CentOS/RHEL
sudo firewall-cmd --permanent --add-port=YOUR_PORT/tcp
sudo firewall-cmd --reload
```

### راه‌اندازی به عنوان سرویس سیستم (نصب دستی)

یک فایل سرویس systemd بساز:

```bash
sudo nano /etc/systemd/system/pg-node.service
```

محتوای زیر رو اضافه کن:

```ini
[Unit]
Description=PasarGuard Node
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/path/to/node
ExecStart=/path/to/node/pasarguard-node
Restart=on-failure
RestartSec=5s

[Install]
WantedBy=multi-user.target
```

سرویس رو فعال و استارت بزن:

```bash
sudo systemctl daemon-reload
sudo systemctl enable pg-node
sudo systemctl start pg-node
```

وضعیت سرویس رو چک کن:

```bash
sudo systemctl status pg-node
```

